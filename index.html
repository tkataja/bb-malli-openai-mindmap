<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mindmap</title>
    <style>
      #mindmap {
        width: 100%;
        height: 100vh;
      }
    </style>
  </head>
  <body>
    <h1>Mindmap</h1>
    <div id="mindmap"></div>
    <script src="https://unpkg.com/d3@6.7.0/dist/d3.min.js"></script>
    <script>
      const MindmapTree = ({ data }) => {
        const transformData = (node) => {
          return {
            name: node.content,
            children: node.children ? node.children.map(transformData) : [],
          };
        };

        const treeData = transformData(data.root);
        const root = d3.hierarchy(treeData);
        const treeLayout = d3
          .tree()
          .size([window.innerHeight, window.innerWidth]);
        treeLayout(root);

        const svg = d3
          .select("#mindmap")
          .append("svg")
          .attr("width", window.innerWidth)
          .attr("height", window.innerHeight);

        const link = svg
          .selectAll(".link")
          .data(root.links())
          .enter()
          .append("line")
          .attr("class", "link")
          .attr("x1", (d) => d.source.y)
          .attr("y1", (d) => d.source.x)
          .attr("x2", (d) => d.target.y)
          .attr("y2", (d) => d.target.x)
          .style("stroke", "#ccc");

        const node = svg
          .selectAll(".node")
          .data(root.descendants())
          .enter()
          .append("g")
          .attr("class", "node")
          .attr("transform", (d) => `translate(${d.y},${d.x})`);

        node
          .append("circle")
          .attr("r", 5)
          .style("fill", "#fff")
          .style("stroke", "steelblue")
          .style("stroke-width", "3px");

        node
          .append("text")
          .attr("dy", 3)
          .attr("x", (d) => (d.children ? -8 : 8))
          .style("text-anchor", (d) => (d.children ? "end" : "start"))
          .text((d) => d.data.name);
      };

      const App = () => {
        const [mindmapData, setMindmapData] = useState(null);

        useEffect(() => {
          // Fetch or generate your mindmap data here
          const fetchData = async () => {
            const response = await fetch("/path/to/your/mindmap/data.json");
            const data = await response.json();
            setMindmapData(data);
          };

          fetchData();
        }, []);

        if (!mindmapData) {
          return h("div", null, "Loading...");
        }

        return h(MindmapTree, { data: mindmapData });
      };

      render(h(App), document.getElementById("mindmap"));
    </script>
  </body>
</html>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple React App</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
